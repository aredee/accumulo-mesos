#!/bin/bash

if [ -f findHome.sh ] ; then
	. findHome.sh
fi

if [ -f bin/findHome.sh ] ; then
	. bin/findHome.sh
fi

if [ ! $SCRIPT_HOME ] ; then
  export SCRIPT_HOME=./
fi

export ACCUMULO_HOME=$SCRIPT_HOME/accumulo-1.7.0
export ACCUMULO_CLIENT_CONF_PATH=$ACCUMULO_HOME/conf/accumulo-site.xml
export HADOOP_PREFIX=/usr/local/hadoop
export HADOOP_CONF_DIR=$HADOOP_PREFIX/etc/hadoop

# Where is the zookeeper jar?
export ZOOKEEPER_HOME=/usr/share/java

rm -f $ACCUMULO_HOME/logs/*
DATE=`date "+%Y%m%d_%H%M%S"`
LOG="mylog_"$DATE.txt
rm -f $LOG

java -jar $SCRIPT_HOME/accumulo-mesos-framework-0.1.0-SNAPSHOT-jar-with-dependencies.jar \
    -j $SCRIPT_HOME/conf/DefaultCluster.json \
    | tee $LOG

